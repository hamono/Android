# 恶意软件特征提取方法

## 特征属性选择

AndroidManifest.xml 是每个 Android 应用的重要组成部分，该文件规定了应用所需的权限及各个组件的信息，因此可以利用该文件的特性，选择相关的标签作为`特征属性选择`的目标，具体标签可对照相应的功能进行筛选。

## 静态检测的模型设计

主要包括：逆向处理（反编译），特征提取，生成特征向量，机器学习判定等过程。

### 逆向处理

利用`APKtool`等相关工具进行反编译，目前我们使用的是`AndroidKiller`集成工具，该工具具有图形化界面，以及相关应用签名等功能，具体功能请查看[Link]("https://www.52pojie.cn/thread-726176-1-1.html") 。该工具对之后的反编译工作效率有一定提升。

### 特征提取

使用`特征属性选择`中描述的方法，筛选相关的标签，提取其中的属性值。这里需要对比普通软件与恶意软件的标签属性值，从而得到筛选的结果，普通软件可采用从相关的应用商店进行下载，恶意软件应用安装包文件来源于北卡罗来纳州立大学创建的`Android恶意应用基因组项目(Androidmalware genomeproject)`公布的 Android 恶意应用样本集合资源[Link](http://www.malgenomeproject.org/)；确定调查样本数量后，进行反编译，利用上述操作，确定标签与相应的属性值。

在提取相应的标签属性值时，可能用到 Python 的`xml.dom`模块和`IO`模块。

利用相关的排序算法，将特征量进行排序。

将编译后的软件包分为两组分别作为`数据组（DAS）`和`学习组（STS）`，下面用到的所有数据均来自`DAS`,`STS`将用于后面的机器学习。

### 生成特征向量

将特征向量转化成`Waikato`知识分析环境 (Waikato environment for knowledge analysis,WEKA)的数据输入格式（.arff），生成相应的特征向量。

### 机器学习判定

利用相应的机器学习算法，结合生成的特征向量，用`STS`数据进行迭代学习。

## 实验检测

对`DAS`和`STS`进行检测，对实验结果预测，制定检测的合格率。

## 特征属性优化

- 分析上述实验结果，扩大样本数量，对一些标签或者其属性值进行重新优化筛选，重复上述步骤，实验检测，分析合格率
- 分析上述实验结果，采用不同机器学习算法，实验检测，分析合格率
- 分析上述实验结果，扩大样本数量，对一些标签或者其属性值进行重新优化筛选，采用不同机器学习算法，实验检测，分析合格率

得出最优的标签或者属性值和最优的机器学习算法，用于该项目的最终结果。
